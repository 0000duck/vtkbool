<!doctype html>
<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <style type="text/css">
        html {
            background-color: #fff;
        }
        #links a {
            display: inline-block;
            padding: 5px;
        }
        #links a:visited {
            color: #00f;
        }
    </style>
    <script type="text/javascript" src="data_files/special_2.js"></script>
    <script type="text/javascript">
        window.addEventListener('load', function () {
            //var pts = 'M251.388015094,333.071261862 L231.288055094,314.798587862 L213.929000094,376.468890862 L191.544967094,361.393924862 L149.517795094,381.493869862 L128.047393095,335.355350862 L161.395042094,273.228229862 L129.610253095,279.122279862 L95.1564740946,321.139087862 L69.1060550945,361.475223862 L68.2657230946,414.416400862 L74.9884140945,469.878589862 L99.3581540946,520.298755862 L145.576644094,583.323962862 L204.400176094,625.340747862 L270.786727094,655.592853862 L333.811950094,692.567645862 L396.837157094,756.433215862 L440.534637094,812.735705862 L462.196593094,814.752002862 L479.864959094,765.390185862 L433.821044094,738.594104862 L478.386474094,686.937915862 L529.835113094,715.972949862 L551.357360094,774.001880862 L525.940337094,821.372424862 L462.196593094,814.752002862 L440.534637094,812.735705862 L503.559844094,852.231494862 L601.038848094,859.794543862 L584.446410094,849.178088862 L561.189086094,804.601550862 L622.239562094,769.392505862 L621.916564094,828.504870862 L584.446410094,849.178088862 L601.038848094,859.794543862 L662.383392094,844.668506862 L675.828765094,804.332385862 L669.106048094,744.668506862 L669.946380094,688.365954862 L647.257293094,637.945819862 L637.173309094,569.878589862 L620.366576094,498.450030862 L602.719512094,430.382785862 L585.072448094,369.038241862 L572.467406094,323.660098862 L530.450591094,269.878581862 L474.988403094,218.618079862 L439.694305094,192.567660862 L380.870788094,193.407990862 L331.290939094,195.929000862 L272.467406094,194.248330862 L205.240516094,210.214720862 L159.862353094,232.903789862 L129.610253095,279.122279862 L161.395042094,273.228229862 L205.249480094,284.191836862 L231.288055094,314.798587862 L251.388015094,333.071261862 L263.722076094,262.264613862 L301.181075094,225.262433862 L371.530914094,303.834979862 L398.939910094,297.439532862 L365.592284094,243.535117862 L421.780791094,219.780627862 L459.696593094,307.032695862 L442.337554094,331.243991862 L427.719390094,304.291789862 L366.962737094,342.664432862 L398.939910094,297.439532862 L371.530914094,303.834979862 L303.465148094,303.834979862 L251.388015094,333.071261862 L257.326629094,367.332553862 L303.008346094,365.962100862 L307.576507094,408.902911862 L293.871993094,474.227740862 L218.040366094,416.668796862 L257.326629094,367.332553862Z';

            //var pts = 'M428.466394079,502.35911238 L437.767154079,487.00655278 L425.942734079,473.50145898 L443.889044079,473.87899278 L449.672344079,456.88706938 L458.317874079,472.61718088 L475.926094079,469.12849638 L466.624834079,484.48291078 L478.449734079,497.98616838 L460.503434079,497.60861638 L454.721484079,514.60288138 L446.074624079,498.87042838 L428.466394079,502.35911238 L402.977684079,518.55924938 L417.421964079,543.57747438 L417.421664079,572.46556938 L402.977884079,597.48351738 L377.959644079,611.92779738 L349.071564079,611.92751738 L335.383394079,663.01241738 L472.214714079,699.67625738 L545.542414079,426.01364638 L271.879754079,352.68594738 L198.552074079,626.34858738 L335.383394079,663.01241738 L349.071564079,611.92751738 L324.053604079,597.48369738 L309.609314079,572.46547938 L309.609594079,543.57740038 L324.053394079,518.55945538 L349.071624079,504.11517238 L335.095994079,477.34058678 L321.591164079,465.51519238 L306.238364079,474.81694458 L309.726334079,457.20800638 L293.995604079,448.56182838 L310.989754079,442.78062738 L310.611824079,424.83267338 L324.116644079,436.65806838 L339.468954079,427.35815138 L335.981474079,444.96527238 L351.712204079,453.61144938 L334.719394079,459.39497438 L335.095994079,477.34058678 L349.071624079,504.11517238 L377.959714079,504.11545338 L402.977684079,518.55924938Z';

            //var pts = 'M247.668521286,368.589025358 L262.897788408,381.367141259 L261.171481329,391.15751521 L330.960113561,403.463134019 L361.551021141,229.973476014 L291.76238891,217.667857205 L290.036420987,227.456307703 L271.355218021,234.255092799 L269.116325062,246.949805642 L284.345252393,259.728382989 L280.893136702,279.306303942 L262.212095211,286.10563887 L246.983182907,273.327064173 L250.435298597,253.749143221 L269.116325062,246.949805642 L271.355218021,234.255092799 L256.125950898,221.476976898 L257.85191882,211.6885264 L188.061363136,199.382568434 L157.470455556,372.872226439 L227.26101124,385.178184405 L228.987318319,375.387810454 L247.668521286,368.589025358 L249.906316658,355.895177058 L234.677397605,343.116596698 L238.129513295,323.538675746 L256.810548038,316.739335154 L272.039467091,329.517915514 L268.587351401,349.095836466 L249.906316658,355.895177058Z';

            // specials

            //var pts = 'M70.7196277178,500.440649271 L51.3081993351,572.885086243 L31.8967709524,645.329523214 L80.1930622669,658.27047547 L128.489353581,671.211427725 L141.430305836,622.91513641 L154.371258092,574.618845096 L141.430305836,622.91513641 L128.489353581,671.211427725 L176.785644896,684.15237998 L225.08193621,697.093332235 L244.493364593,624.648895263 L263.904792976,552.204458292 L167.312210347,526.322553781Z';

            //var pts = 'M36.3963933377,542.271227044 L62.4436199877,689.992389996 L111.684007639,681.309981112 L160.924395289,672.627572229 L147.900778231,598.766991411 L172.520968322,594.425787628 L197.141162149,590.084583186 L172.520968322,594.425787628 L147.900778231,598.766991411 L160.924395289,672.627572229 L210.16478294,663.945163346 L259.40517059,655.262754462 L233.357943941,507.54159151 L134.877168639,524.906409277Z';

            var pts = 'M54.8179928609,515.336814121 L41.7446314488,664.766018835 L116.459233806,671.302699541 L125.17480808,571.683229732 L174.984542985,576.041016869 L170.626755848,625.850751774 L120.817020943,621.492964637 L116.459233806,671.302699541 L240.983571067,682.197167385 L254.056932479,532.767962671Z';

            function toPoly (pts_) {
                var pts2 = pts_.slice(1, -1).split(' L');
                var poly = [];
                for (var i = 0; i < pts2.length; i++) {
                    poly.push(pts2[i].split(',').map(function (v) {
                        return parseFloat(v);
                    }));
                }
                return poly;
            }

            var poly = toPoly(pts);

            console.log(poly);
            var canvas = document.getElementsByTagName('canvas')[0];
            var ctx = canvas.getContext('2d');

            var x = [],
                y = [];

            for (var i = 0; i < poly.length; i++) {
                x.push(poly[i][0]);
                y.push(poly[i][1]);
            }

            var mnX = Math.min.apply(null, x),
                mxX = Math.max.apply(null, x),
                mnY = Math.min.apply(null, y),
                mxY = Math.max.apply(null, y);

            console.log(mnX, mxX, mnY, mxY);

            var width = mxX-mnX,
                height = mxY-mnY;

            console.log(width, height);

            canvas.height = height+40;
            canvas.width = width+40;

            console.log(mnX, mnY);

            for (var i = 0; i < poly.length; i++) {
                poly[i][0] += -mnX+20;
                poly[i][1] += -mnY+20;
            }

            function drawPoly (color, poly_) {

                ctx.strokeStyle = color;
                ctx.lineWidth = 2;

                ctx.beginPath();

                ctx.moveTo(poly_[0][0], poly_[0][1]);

                for (var i = 1; i < poly_.length; i++) {
                    ctx.lineTo(poly_[i][0], poly_[i][1]);
                }

                ctx.lineTo(poly_[0][0], poly_[0][1]);

                ctx.stroke();
            }

            function drawResult (k) {
                var p = toPoly(polys[k]);

                for (var i = 0; i < p.length; i++) {
                    p[i][0] += -mnX+20;
                    p[i][1] += -mnY+20;
                }

                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawPoly('#000', poly);
                drawPoly('#f00', p);

                ctx.strokeStyle = '#00d4aa';

                ctx.beginPath();
                ctx.arc(poly[k][0], poly[k][1], 5, 0, 2*Math.PI);
                ctx.stroke();

                ctx.fillStyle = 'black';
                ctx.font = '14px serif';

                for (var i = 0; i < poly.length; i++) {
                    ctx.fillText(i.toString(), poly[i][0], poly[i][1]);
                }

                ctx.fillStyle = '#00f';

                for (var i = 0; i < p.length; i++) {
                    ctx.beginPath();
                    ctx.arc(p[i][0], p[i][1], 3, 0, 2*Math.PI);
                    ctx.fill();
                }
            }

            var links = [];

            for (var k in polys) {
                links.push('<a href="#' + k + '">' + k + '</a>');
            }

            var l = document.getElementById('links');
            l.innerHTML = links.join('');

            l.addEventListener('click', function (e) {
                var i = e.target.getAttribute('href').slice(1);
                drawResult(i);
            });

            if (window.location.hash != '') {
                drawResult(window.location.hash.slice(1));
            } else {
                var keys = Object.keys(polys);
                if (keys.length > 0) {
                    drawResult(keys[0]);
                }
            }

        });
    </script>
</head>
<body>
    <canvas></canvas>
    <p id="links"></p>
</body>
</html>
